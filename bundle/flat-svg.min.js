!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).FlatSVGLib={})}(this,(function(t){"use strict";var e=/[a-zA-Z0-9:_-]/,r=/[\s\t\r\n]/,n=/['"]/;function s(t){var s="",a=[],i=h,o=null,c=null;function u(e){var r=function(t,e,r){if("number"==typeof r)throw new Error("locate takes a { startIndex, offsetLine, offsetColumn } object as the third argument");return function(t,e){void 0===e&&(e={});var r=e.offsetLine||0,n=e.offsetColumn||0,s=t.split("\n"),a=0,i=s.map((function(t,e){var r=a+t.length+1,n={start:a,end:r,line:e};return a=r,n})),o=0;function c(t,e){return t.start<=e&&e<t.end}function u(t,e){return{line:r+t.line,column:n+e-t.start,character:e}}return function(e,r){"string"==typeof e&&(e=t.indexOf(e,r||0));for(var n=i[o],s=e>=n.end?1:-1;n;){if(c(n,e))return u(n,e);n=i[o+=s]}}}(t,r)(e,r&&r.startIndex)}(t,y),n=r.line,s=r.column,a=t.slice(0,y),i=/(^|\n).*$/.exec(a)[0].replace(/\t/g,"  "),o=t.slice(y),c=""+i+/.*(\n|$)/.exec(o)[0]+"\n"+function(t,e){for(var r="";e--;)r+=t;return r}(" ",i.length)+"^";throw new Error(e+" ("+n+":"+s+"). If this is valid SVG, it's probably a bug in svg-parser. Please raise an issue at https://github.com/Rich-Harris/svg-parser/issues – thanks!\n\n"+c)}function h(){for(;y<t.length&&"<"!==t[y]||!e.test(t[y+1]);)s+=t[y++];return l()}function l(){for(var e="";y<t.length&&"<"!==t[y];)e+=t[y++];return/\S/.test(e)&&o.children.push({type:"text",value:e}),"<"===t[y]?f:l}function f(){var e=t[y];if("?"===e)return l;if("!"===e){if("--"===t.slice(y+1,y+3))return p;if("[CDATA["===t.slice(y+1,y+8))return d;if(/doctype/i.test(t.slice(y+1,y+8)))return l}if("/"===e)return g;var r,n={type:"element",tagName:m(),properties:{},children:[]};for(o?o.children.push(n):c=n;y<t.length&&(r=b());)n.properties[r.name]=r.value;var s=!1;return"/"===t[y]&&(y+=1,s=!0),">"!==t[y]&&u("Expected >"),s||(o=n,a.push(n)),l}function p(){var e=t.indexOf("--\x3e",y);return~e||u("expected --\x3e"),y=e+2,l}function d(){var e=t.indexOf("]]>",y);return~e||u("expected ]]>"),o.children.push(t.slice(y+7,e)),y=e+2,l}function g(){var e=m();return e||u("Expected tag name"),e!==o.tagName&&u("Expected closing tag </"+e+"> to match opening tag <"+o.tagName+">"),v(),">"!==t[y]&&u("Expected >"),a.pop(),o=a[a.length-1],l}function m(){for(var r="";y<t.length&&e.test(t[y]);)r+=t[y++];return r}function b(){if(!r.test(t[y]))return null;v();var e=m();if(!e)return null;var s=!0;return v(),"="===t[y]&&(y+=1,v(),s=n.test(t[y])?function(){for(var e=t[y++],r="",n=!1;y<t.length;){var s=t[y++];if(s===e&&!n)return r;"\\"!==s||n||(n=!0),r+=n?"\\"+s:s,n=!1}}():function(){var e="";do{var r=t[y];if(" "===r||">"===r||"/"===r)return e;e+=r,y+=1}while(y<t.length);return e}(),isNaN(s)||""===s.trim()||(s=+s)),{name:e,value:s}}function v(){for(;y<t.length&&r.test(t[y]);)y+=1}for(var y=h.length;y<t.length;)i||u("Unexpected character"),i=i(),y+=1;return i!==l&&u("Unexpected end of input"),"svg"===c.tagName&&(c.metadata=s),{type:"root",children:[c]}}function a(t){return!Number.isNaN(t)&&"number"==typeof t}function i(t){return a(t)&&t>0}function o(t){return a(t)&&t>=0}function c(t){return"string"==typeof t}function u(t){return Array.isArray(t)||function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(t)}function h(t){return t.replace(/^\s+|\s+$/g,"")}function l(t){let e=[];if(""===t||void 0===t)return e;if(a(t)){if(!i(t))throw new Error(`Expected positive number for stroke-dasharray value, got ${t}.`);e=[t]}else if(c(t))e=t.split(" ").map((t=>{const e=Number.parseFloat(t);if(!i(e))throw new Error(`Expected positive number for stroke-dasharray value, got ${e} from string "${t}".`);return e}));else{if(!u(t))throw new Error(`Invalid type ${typeof t} for stroke-dasharray property ${t}.`);for(let r=0,n=t.length;r<n;r++){const n=t[r];if(!i(n))throw new Error(`Expected positive number for stroke-dasharray value, got ${n} from array ${JSON.stringify(t)}.`);e.push(n)}}return e.length%2==1&&(e=[...e,...e]),e}function f(t,e){const r=t.match(/(translate|matrix|rotate|skewX|skewY|scale)\s*\(\s*(.*?)\s*\)/gi),n=[t.slice()],s=[];if(r)for(let t=0;t<r.length;t++){const a={a:1,b:0,c:0,d:1,e:0,f:0},i=r[t],o=n.pop(),c=o.indexOf(i);n.push(o.slice(0,c),o.slice(c+i.length));const u=i.split(/[\(\)]+/);if(u.length>2&&u.pop(),2!==u.length){a.errors=[`Malformed transform: "${i}".`],s.push(a);continue}const l=h(u[0]).toLowerCase();let f=h(u[1]).split(",");1===f.length&&(f=f[0].split(/\s+/));const p=[];for(let t=0;t<f.length;t++){const e=f[t];p.push(parseFloat(e)),p[t]!==1/0&&p[t]!==-1/0||(p[t]=NaN)}let d=[];switch(l){case"translate":d=[1,2],a.e=p[0]||0,a.f=p[1]||0;break;case"scale":d=[1,2],a.a=0===p[0]?0:p[0]||1,a.d=0===p[1]?0:p[1]||a.a;break;case"rotate":{d=[1,3];const t=(p[0]||0)*Math.PI/180;if(0!==t){const e=p[1]||0,r=p[2]||0,n=Math.cos(t),s=Math.sin(t);a.a=n,a.b=s,a.c=-s,a.d=n,a.e=-e*n+r*s+e,a.f=-e*s-r*n+r}break}case"skewx":{d=[1];const t=(p[0]||0)*Math.PI/180;0!==t&&(a.c=Math.tan(t));break}case"skewy":{d=[1];const t=(p[0]||0)*Math.PI/180;0!==t&&(a.b=Math.tan(t));break}case"matrix":d=[6],a.a=0===p[0]?0:p[0]||1,a.b=p[1]||0,a.c=p[2]||0,a.d=0===p[3]?0:p[3]||1,a.e=p[4]||0,a.f=p[5]||0;break;default:a.errors=[`Unknown transform ${l}.`]}const g=[];let m=f.length;if(1===m&&""===f[0]&&(m=0),d.indexOf(m)<0)g.push(`Found ${e?`${e} `:""}element with malformed transform: "${i}" containing ${m} parameters, expected ${d.join(" or ")} parameter${d[d.length-1]>1?"s":""}.`);else for(let t=0;t<p.length;t++)if(isNaN(p[t])){g.push(`Found ${e?`${e} `:""}element with invalid transform: "${i}", transform parameters must be finite numbers.`);break}g.length&&(a.warnings=g),s.push(a)}for(let t=n.length-1;t>=0;t--)n[t]=h(n[t]),""!==n[t]&&","!==n[t]||n.splice(t,1);if(n.length){const t={a:1,b:0,c:0,d:1,e:0,f:0};t.errors=[`Malformed transform, unmatched characters: [ ${n.map((t=>`"${t}"`)).join(", ")} ].`],s.push(t)}return s}function p(t){const e=m(t[0]);for(let r=1;r<t.length;r++)d(e,t[r]);return e}function d(t,e){const r=t.a*e.a+t.c*e.b,n=t.b*e.a+t.d*e.b,s=t.a*e.c+t.c*e.d,a=t.b*e.c+t.d*e.d,i=t.a*e.e+t.c*e.f+t.e,o=t.b*e.e+t.d*e.f+t.f;return t.a=r,t.b=n,t.c=s,t.d=a,t.e=i,t.f=o,t}function g(t,e){const r=e.a*t[0]+e.c*t[1]+e.e,n=e.b*t[0]+e.d*t[1]+e.f;return t[0]=r,t[1]=n,t}function m(t){return{a:t.a,b:t.b,c:t.c,d:t.d,e:t.e,f:t.f}}var b={grad:.9,turn:360,rad:360/(2*Math.PI)},v=function(t){return"string"==typeof t?t.length>0:"number"==typeof t},y=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},w=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=1),t>r?r:t>e?t:e},x=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},k=function(t){return{r:w(t.r,0,255),g:w(t.g,0,255),b:w(t.b,0,255),a:w(t.a)}},$=function(t){return{r:y(t.r),g:y(t.g),b:y(t.b),a:y(t.a,3)}},M=/^#([0-9a-f]{3,8})$/i,_=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},S=function(t){var e=t.r,r=t.g,n=t.b,s=t.a,a=Math.max(e,r,n),i=a-Math.min(e,r,n),o=i?a===e?(r-n)/i:a===r?2+(n-e)/i:4+(e-r)/i:0;return{h:60*(o<0?o+6:o),s:a?i/a*100:0,v:a/255*100,a:s}},N=function(t){var e=t.h,r=t.s,n=t.v,s=t.a;e=e/360*6,r/=100,n/=100;var a=Math.floor(e),i=n*(1-r),o=n*(1-(e-a)*r),c=n*(1-(1-e+a)*r),u=a%6;return{r:255*[n,o,i,i,c,n][u],g:255*[c,n,n,o,i,i][u],b:255*[i,i,c,n,n,o][u],a:s}},A=function(t){return{h:x(t.h),s:w(t.s,0,100),l:w(t.l,0,100),a:w(t.a)}},O=function(t){return{h:y(t.h),s:y(t.s),l:y(t.l),a:y(t.a,3)}},P=function(t){return N((r=(e=t).s,{h:e.h,s:(r*=((n=e.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:e.a}));var e,r,n},j=function(t){return{h:(e=S(t)).h,s:(s=(200-(r=e.s))*(n=e.v)/100)>0&&s<200?r*n/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,r,n,s},F=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,C=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,I=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,E=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,q={string:[[function(t){var e=M.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?y(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?y(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=I.exec(t)||E.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:k({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=F.exec(t)||C.exec(t);if(!e)return null;var r,n,s=A({h:(r=e[1],n=e[2],void 0===n&&(n="deg"),Number(r)*(b[n]||1)),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)});return P(s)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,n=t.b,s=t.a,a=void 0===s?1:s;return v(e)&&v(r)&&v(n)?k({r:Number(e),g:Number(r),b:Number(n),a:Number(a)}):null},"rgb"],[function(t){var e=t.h,r=t.s,n=t.l,s=t.a,a=void 0===s?1:s;if(!v(e)||!v(r)||!v(n))return null;var i=A({h:Number(e),s:Number(r),l:Number(n),a:Number(a)});return P(i)},"hsl"],[function(t){var e=t.h,r=t.s,n=t.v,s=t.a,a=void 0===s?1:s;if(!v(e)||!v(r)||!v(n))return null;var i=function(t){return{h:x(t.h),s:w(t.s,0,100),v:w(t.v,0,100),a:w(t.a)}}({h:Number(e),s:Number(r),v:Number(n),a:Number(a)});return N(i)},"hsv"]]},V=function(t,e){for(var r=0;r<e.length;r++){var n=e[r][0](t);if(n)return[n,e[r][1]]}return[null,void 0]},L=function(t,e){var r=j(t);return{h:r.h,s:w(r.s+100*e,0,100),l:r.l,a:r.a}},z=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},G=function(t,e){var r=j(t);return{h:r.h,s:r.s,l:w(r.l+100*e,0,100),a:r.a}},J=function(){function t(t){this.parsed=function(t){return"string"==typeof t?V(t.trim(),q.string):"object"==typeof t&&null!==t?V(t,q.object):[null,void 0]}(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return null!==this.parsed},t.prototype.brightness=function(){return y(z(this.rgba),2)},t.prototype.isDark=function(){return z(this.rgba)<.5},t.prototype.isLight=function(){return z(this.rgba)>=.5},t.prototype.toHex=function(){return e=(t=$(this.rgba)).r,r=t.g,n=t.b,a=(s=t.a)<1?_(y(255*s)):"","#"+_(e)+_(r)+_(n)+a;var t,e,r,n,s,a},t.prototype.toRgb=function(){return $(this.rgba)},t.prototype.toRgbString=function(){return e=(t=$(this.rgba)).r,r=t.g,n=t.b,(s=t.a)<1?"rgba("+e+", "+r+", "+n+", "+s+")":"rgb("+e+", "+r+", "+n+")";var t,e,r,n,s},t.prototype.toHsl=function(){return O(j(this.rgba))},t.prototype.toHslString=function(){return e=(t=O(j(this.rgba))).h,r=t.s,n=t.l,(s=t.a)<1?"hsla("+e+", "+r+"%, "+n+"%, "+s+")":"hsl("+e+", "+r+"%, "+n+"%)";var t,e,r,n,s},t.prototype.toHsv=function(){return t=S(this.rgba),{h:y(t.h),s:y(t.s),v:y(t.v),a:y(t.a,3)};var t},t.prototype.invert=function(){return H({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},t.prototype.saturate=function(t){return void 0===t&&(t=.1),H(L(this.rgba,t))},t.prototype.desaturate=function(t){return void 0===t&&(t=.1),H(L(this.rgba,-t))},t.prototype.grayscale=function(){return H(L(this.rgba,-1))},t.prototype.lighten=function(t){return void 0===t&&(t=.1),H(G(this.rgba,t))},t.prototype.darken=function(t){return void 0===t&&(t=.1),H(G(this.rgba,-t))},t.prototype.rotate=function(t){return void 0===t&&(t=15),this.hue(this.hue()+t)},t.prototype.alpha=function(t){return"number"==typeof t?H({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):y(this.rgba.a,3);var e},t.prototype.hue=function(t){var e=j(this.rgba);return"number"==typeof t?H({h:t,s:e.s,l:e.l,a:e.a}):y(e.h)},t.prototype.isEqual=function(t){return this.toHex()===H(t).toHex()},t}(),H=function(t){return t instanceof J?t:new J(t)},T=[],B=function(t){t.forEach((function(t){T.indexOf(t)<0&&(t(J,q),T.push(t))}))};var R=function(t){return"string"==typeof t?t.length>0:"number"==typeof t},U=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},X=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=1),t>r?r:t>e?t:e},Y=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},D=function(t){return 255*(t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t)},Q=96.422,W=82.521,Z=function(t){var e,r,n=.9555766*(e=t).x+-.0230393*e.y+.0631636*e.z,s=-.0282895*e.x+1.0099416*e.y+.0210077*e.z,a=.0122982*e.x+-.020483*e.y+1.3299098*e.z;return r={r:D(.032404542*n-.015371385*s-.004985314*a),g:D(-.00969266*n+.018760108*s+41556e-8*a),b:D(556434e-9*n-.002040259*s+.010572252*a),a:t.a},{r:X(r.r,0,255),g:X(r.g,0,255),b:X(r.b,0,255),a:X(r.a)}},K=function(t){var e=Y(t.r),r=Y(t.g),n=Y(t.b);return function(t){return{x:X(t.x,0,Q),y:X(t.y,0,100),z:X(t.z,0,W),a:X(t.a)}}(function(t){return{x:1.0478112*t.x+.0228866*t.y+-.050127*t.z,y:.0295424*t.x+.9904844*t.y+-.0170491*t.z,z:-.0092345*t.x+.0150436*t.y+.7521316*t.z,a:t.a}}({x:100*(.4124564*e+.3575761*r+.1804375*n),y:100*(.2126729*e+.7151522*r+.072175*n),z:100*(.0193339*e+.119192*r+.9503041*n),a:t.a}))},tt=216/24389,et=24389/27,rt=function(t){var e=t.l,r=t.a,n=t.b,s=t.alpha,a=void 0===s?1:s;if(!R(e)||!R(r)||!R(n))return null;var i=function(t){return{l:X(t.l,0,400),a:t.a,b:t.b,alpha:X(t.alpha)}}({l:Number(e),a:Number(r),b:Number(n),alpha:Number(a)});return nt(i)},nt=function(t){var e=(t.l+16)/116,r=t.a/500+e,n=e-t.b/200;return Z({x:(Math.pow(r,3)>tt?Math.pow(r,3):(116*r-16)/et)*Q,y:100*(t.l>8?Math.pow((t.l+16)/116,3):t.l/et),z:(Math.pow(n,3)>tt?Math.pow(n,3):(116*n-16)/et)*W,a:t.alpha})};const st="polygon",at="polyline",it="fill",ot="stroke",ct="color",ut="opacity",ht="stroke-dasharray";function lt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ft={exports:{}},pt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},dt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function gt(t){return t>=48&&t<=57}function mt(t){return t>=48&&t<=57||43===t||45===t||46===t}function bt(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function vt(t){for(;t.index<t.max&&(10===(e=t.path.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&dt.indexOf(e)>=0);)t.index++;var e}function yt(t){var e=t.path.charCodeAt(t.index);return 48===e?(t.param=0,void t.index++):49===e?(t.param=1,void t.index++):void(t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")")}function wt(t){var e,r=t.index,n=r,s=t.max,a=!1,i=!1,o=!1,c=!1;if(n>=s)t.err="SvgPath: missed param (at pos "+n+")";else if(43!==(e=t.path.charCodeAt(n))&&45!==e||(e=++n<s?t.path.charCodeAt(n):0),gt(e)||46===e){if(46!==e){if(a=48===e,e=++n<s?t.path.charCodeAt(n):0,a&&n<s&&e&&gt(e))return void(t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+r+")");for(;n<s&&gt(t.path.charCodeAt(n));)n++,i=!0;e=n<s?t.path.charCodeAt(n):0}if(46===e){for(c=!0,n++;gt(t.path.charCodeAt(n));)n++,o=!0;e=n<s?t.path.charCodeAt(n):0}if(101===e||69===e){if(c&&!i&&!o)return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");if(43!==(e=++n<s?t.path.charCodeAt(n):0)&&45!==e||n++,!(n<s&&gt(t.path.charCodeAt(n))))return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");for(;n<s&&gt(t.path.charCodeAt(n));)n++}t.index=n,t.param=parseFloat(t.path.slice(r,n))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")"}function xt(t){var e,r;r=(e=t.path[t.segmentStart]).toLowerCase();var n=t.data;if("m"===r&&n.length>2&&(t.result.push([e,n[0],n[1]]),n=n.slice(2),r="l",e="m"===e?"l":"L"),"r"===r)t.result.push([e].concat(n));else for(;n.length>=pt[r]&&(t.result.push([e].concat(n.splice(0,pt[r]))),pt[r]););}function kt(t){var e,r,n,s,a,i=t.max;if(t.segmentStart=t.index,e=t.path.charCodeAt(t.index),r=97==(32|e),function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(e))if(s=pt[t.path[t.index].toLowerCase()],t.index++,vt(t),t.data=[],s){for(n=!1;;){for(a=s;a>0;a--){if(!r||3!==a&&4!==a?wt(t):yt(t),t.err.length)return void xt(t);t.data.push(t.param),vt(t),n=!1,t.index<i&&44===t.path.charCodeAt(t.index)&&(t.index++,vt(t),n=!0)}if(!n){if(t.index>=t.max)break;if(!mt(t.path.charCodeAt(t.index)))break}}xt(t)}else xt(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}function $t(){if(!(this instanceof $t))return new $t;this.queue=[],this.cache=null}$t.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},$t.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},$t.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},$t.prototype.rotate=function(t,e,r){var n,s,a;return 0!==t&&(this.translate(e,r),n=t*Math.PI/180,s=Math.cos(n),a=Math.sin(n),this.queue.push([s,a,-a,s,0,0]),this.cache=null,this.translate(-e,-r)),this},$t.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},$t.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},$t.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=(e=this.cache,r=this.queue[t],[e[0]*r[0]+e[2]*r[1],e[1]*r[0]+e[3]*r[1],e[0]*r[2]+e[2]*r[3],e[1]*r[2]+e[3]*r[3],e[0]*r[4]+e[2]*r[5]+e[4],e[1]*r[4]+e[3]*r[5]+e[5]]);var e,r;return this.cache},$t.prototype.calc=function(t,e,r){var n;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(n=this.cache)[0]+e*n[2]+(r?0:n[4]),t*n[1]+e*n[3]+(r?0:n[5])]):[t,e]};var Mt=$t,_t=Mt,St={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},Nt=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,At=/[\s,]+/,Ot=2*Math.PI;function Pt(t,e,r,n){var s=t*r+e*n;return s>1&&(s=1),s<-1&&(s=-1),(t*n-e*r<0?-1:1)*Math.acos(s)}function jt(t,e){var r=4/3*Math.tan(e/4),n=Math.cos(t),s=Math.sin(t),a=Math.cos(t+e),i=Math.sin(t+e);return[n,s,n-s*r,s+n*r,a+i*r,i-a*r,a,i]}var Ft=1e-10,Ct=Math.PI/180;function It(t,e,r){if(!(this instanceof It))return new It(t,e,r);this.rx=t,this.ry=e,this.ax=r}It.prototype.transform=function(t){var e=Math.cos(this.ax*Ct),r=Math.sin(this.ax*Ct),n=[this.rx*(t[0]*e+t[2]*r),this.rx*(t[1]*e+t[3]*r),this.ry*(-t[0]*r+t[2]*e),this.ry*(-t[1]*r+t[3]*e)],s=n[0]*n[0]+n[2]*n[2],a=n[1]*n[1]+n[3]*n[3],i=((n[0]-n[3])*(n[0]-n[3])+(n[2]+n[1])*(n[2]+n[1]))*((n[0]+n[3])*(n[0]+n[3])+(n[2]-n[1])*(n[2]-n[1])),o=(s+a)/2;if(i<Ft*o)return this.rx=this.ry=Math.sqrt(o),this.ax=0,this;var c=n[0]*n[1]+n[2]*n[3],u=o+(i=Math.sqrt(i))/2,h=o-i/2;return this.ax=Math.abs(c)<Ft&&Math.abs(u-a)<Ft?90:180*Math.atan(Math.abs(c)>Math.abs(u-a)?(u-s)/c:c/(u-a))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(u),this.ry=Math.sqrt(h)):(this.ax+=90,this.rx=Math.sqrt(h),this.ry=Math.sqrt(u)),this},It.prototype.isDegenerate=function(){return this.rx<Ft*this.ry||this.ry<Ft*this.rx};var Et=function(t){var e=new bt(t),r=e.max;for(vt(e);e.index<r&&!e.err.length;)kt(e);return e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}},qt=function(t){var e,r,n=new _t;return t.split(Nt).forEach((function(t){if(t.length)if(void 0===St[t])switch(r=t.split(At).map((function(t){return+t||0})),e){case"matrix":return void(6===r.length&&n.matrix(r));case"scale":return void(1===r.length?n.scale(r[0],r[0]):2===r.length&&n.scale(r[0],r[1]));case"rotate":return void(1===r.length?n.rotate(r[0],0,0):3===r.length&&n.rotate(r[0],r[1],r[2]));case"translate":return void(1===r.length?n.translate(r[0],0):2===r.length&&n.translate(r[0],r[1]));case"skewX":return void(1===r.length&&n.skewX(r[0]));case"skewY":return void(1===r.length&&n.skewY(r[0]))}else e=t})),n},Vt=Mt,Lt=function(t,e,r,n,s,a,i,o,c){var u=Math.sin(c*Ot/360),h=Math.cos(c*Ot/360),l=h*(t-r)/2+u*(e-n)/2,f=-u*(t-r)/2+h*(e-n)/2;if(0===l&&0===f)return[];if(0===i||0===o)return[];i=Math.abs(i),o=Math.abs(o);var p=l*l/(i*i)+f*f/(o*o);p>1&&(i*=Math.sqrt(p),o*=Math.sqrt(p));var d=function(t,e,r,n,s,a,i,o,c,u){var h=u*(t-r)/2+c*(e-n)/2,l=-c*(t-r)/2+u*(e-n)/2,f=i*i,p=o*o,d=h*h,g=l*l,m=f*p-f*g-p*d;m<0&&(m=0),m/=f*g+p*d;var b=(m=Math.sqrt(m)*(s===a?-1:1))*i/o*l,v=m*-o/i*h,y=u*b-c*v+(t+r)/2,w=c*b+u*v+(e+n)/2,x=(h-b)/i,k=(l-v)/o,$=(-h-b)/i,M=(-l-v)/o,_=Pt(1,0,x,k),S=Pt(x,k,$,M);return 0===a&&S>0&&(S-=Ot),1===a&&S<0&&(S+=Ot),[y,w,_,S]}(t,e,r,n,s,a,i,o,u,h),g=[],m=d[2],b=d[3],v=Math.max(Math.ceil(Math.abs(b)/(Ot/4)),1);b/=v;for(var y=0;y<v;y++)g.push(jt(m,b)),m+=b;return g.map((function(t){for(var e=0;e<t.length;e+=2){var r=t[e+0],n=t[e+1],s=h*(r*=i)-u*(n*=o),a=u*r+h*n;t[e+0]=s+d[0],t[e+1]=a+d[1]}return t}))},zt=It;function Gt(t){if(!(this instanceof Gt))return new Gt(t);var e=Et(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}Gt.from=function(t){if("string"==typeof t)return new Gt(t);if(t instanceof Gt){var e=new Gt("");return e.err=t.err,e.segments=t.segments.map((function(t){return t.slice()})),e.__stack=t.__stack.map((function(t){return Vt().matrix(t.toArray())})),e}throw new Error("SvgPath.from: invalid param type "+t)},Gt.prototype.__matrix=function(t){var e,r=this;t.queue.length&&this.iterate((function(n,s,a,i){var o,c,u,h;switch(n[0]){case"v":c=0===(o=t.calc(0,n[1],!0))[0]?["v",o[1]]:["l",o[0],o[1]];break;case"V":c=(o=t.calc(a,n[1],!1))[0]===t.calc(a,i,!1)[0]?["V",o[1]]:["L",o[0],o[1]];break;case"h":c=0===(o=t.calc(n[1],0,!0))[1]?["h",o[0]]:["l",o[0],o[1]];break;case"H":c=(o=t.calc(n[1],i,!1))[1]===t.calc(a,i,!1)[1]?["H",o[0]]:["L",o[0],o[1]];break;case"a":case"A":var l=t.toArray(),f=zt(n[1],n[2],n[3]).transform(l);if(l[0]*l[3]-l[1]*l[2]<0&&(n[5]=n[5]?"0":"1"),o=t.calc(n[6],n[7],"a"===n[0]),"A"===n[0]&&n[6]===a&&n[7]===i||"a"===n[0]&&0===n[6]&&0===n[7]){c=["a"===n[0]?"l":"L",o[0],o[1]];break}c=f.isDegenerate()?["a"===n[0]?"l":"L",o[0],o[1]]:[n[0],f.rx,f.ry,f.ax,n[4],n[5],o[0],o[1]];break;case"m":h=s>0,c=["m",(o=t.calc(n[1],n[2],h))[0],o[1]];break;default:for(c=[u=n[0]],h=u.toLowerCase()===u,e=1;e<n.length;e+=2)o=t.calc(n[e],n[e+1],h),c.push(o[0],o[1])}r.segments[s]=c}),!0)},Gt.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=Vt(),e=this.__stack.length;--e>=0;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},Gt.prototype.toString=function(){var t="",e="",r=!1;this.__evaluateStack();for(var n=0,s=this.segments.length;n<s;n++){var a=this.segments[n],i=a[0];i!==e||"m"===i||"M"===i?("m"===i&&"z"===e&&(t+=" "),t+=i,r=!1):r=!0;for(var o=1;o<a.length;o++){var c=a[o];1===o?r&&c>=0&&(t+=" "):c>=0&&(t+=" "),t+=c}e=i}return t},Gt.prototype.translate=function(t,e){return this.__stack.push(Vt().translate(t,e||0)),this},Gt.prototype.scale=function(t,e){return this.__stack.push(Vt().scale(t,e||0===e?e:t)),this},Gt.prototype.rotate=function(t,e,r){return this.__stack.push(Vt().rotate(t,e||0,r||0)),this},Gt.prototype.skewX=function(t){return this.__stack.push(Vt().skewX(t)),this},Gt.prototype.skewY=function(t){return this.__stack.push(Vt().skewY(t)),this},Gt.prototype.matrix=function(t){return this.__stack.push(Vt().matrix(t)),this},Gt.prototype.transform=function(t){return t.trim()?(this.__stack.push(qt(t)),this):this},Gt.prototype.round=function(t){var e,r=0,n=0,s=0,a=0;return t=t||0,this.__evaluateStack(),this.segments.forEach((function(i){var o=i[0].toLowerCase()===i[0];switch(i[0]){case"H":case"h":return o&&(i[1]+=s),s=i[1]-i[1].toFixed(t),void(i[1]=+i[1].toFixed(t));case"V":case"v":return o&&(i[1]+=a),a=i[1]-i[1].toFixed(t),void(i[1]=+i[1].toFixed(t));case"Z":case"z":return s=r,void(a=n);case"M":case"m":return o&&(i[1]+=s,i[2]+=a),s=i[1]-i[1].toFixed(t),a=i[2]-i[2].toFixed(t),r=s,n=a,i[1]=+i[1].toFixed(t),void(i[2]=+i[2].toFixed(t));case"A":case"a":return o&&(i[6]+=s,i[7]+=a),s=i[6]-i[6].toFixed(t),a=i[7]-i[7].toFixed(t),i[1]=+i[1].toFixed(t),i[2]=+i[2].toFixed(t),i[3]=+i[3].toFixed(t+2),i[6]=+i[6].toFixed(t),void(i[7]=+i[7].toFixed(t));default:return e=i.length,o&&(i[e-2]+=s,i[e-1]+=a),s=i[e-2]-i[e-2].toFixed(t),a=i[e-1]-i[e-1].toFixed(t),void i.forEach((function(e,r){r&&(i[r]=+i[r].toFixed(t))}))}})),this},Gt.prototype.iterate=function(t,e){var r,n,s,a=this.segments,i={},o=!1,c=0,u=0,h=0,l=0;if(e||this.__evaluateStack(),a.forEach((function(e,r){var n=t(e,r,c,u);Array.isArray(n)&&(i[r]=n,o=!0);var s=e[0]===e[0].toLowerCase();switch(e[0]){case"m":case"M":return c=e[1]+(s?c:0),u=e[2]+(s?u:0),h=c,void(l=u);case"h":case"H":return void(c=e[1]+(s?c:0));case"v":case"V":return void(u=e[1]+(s?u:0));case"z":case"Z":return c=h,void(u=l);default:c=e[e.length-2]+(s?c:0),u=e[e.length-1]+(s?u:0)}})),!o)return this;for(s=[],r=0;r<a.length;r++)if(void 0!==i[r])for(n=0;n<i[r].length;n++)s.push(i[r][n]);else s.push(a[r]);return this.segments=s,this},Gt.prototype.abs=function(){return this.iterate((function(t,e,r,n){var s,a=t[0],i=a.toUpperCase();if(a!==i)switch(t[0]=i,a){case"v":return void(t[1]+=n);case"a":return t[6]+=r,void(t[7]+=n);default:for(s=1;s<t.length;s++)t[s]+=s%2?r:n}}),!0),this},Gt.prototype.rel=function(){return this.iterate((function(t,e,r,n){var s,a=t[0],i=a.toLowerCase();if(a!==i&&(0!==e||"M"!==a))switch(t[0]=i,a){case"V":return void(t[1]-=n);case"A":return t[6]-=r,void(t[7]-=n);default:for(s=1;s<t.length;s++)t[s]-=s%2?r:n}}),!0),this},Gt.prototype.unarc=function(){return this.iterate((function(t,e,r,n){var s,a,i,o=[],c=t[0];return"A"!==c&&"a"!==c?null:("a"===c?(a=r+t[6],i=n+t[7]):(a=t[6],i=t[7]),0===(s=Lt(r,n,a,i,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(s.forEach((function(t){o.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])})),o))})),this},Gt.prototype.unshort=function(){var t,e,r,n,s,a=this.segments;return this.iterate((function(i,o,c,u){var h,l=i[0],f=l.toUpperCase();o&&("T"===f?(h="t"===l,"Q"===(r=a[o-1])[0]?(t=r[1]-c,e=r[2]-u):"q"===r[0]?(t=r[1]-r[3],e=r[2]-r[4]):(t=0,e=0),n=-t,s=-e,h||(n+=c,s+=u),a[o]=[h?"q":"Q",n,s,i[1],i[2]]):"S"===f&&(h="s"===l,"C"===(r=a[o-1])[0]?(t=r[3]-c,e=r[4]-u):"c"===r[0]?(t=r[3]-r[5],e=r[4]-r[6]):(t=0,e=0),n=-t,s=-e,h||(n+=c,s+=u),a[o]=[h?"c":"C",n,s,i[1],i[2],i[3],i[4]]))})),this};var Jt=Gt;!function(t){t.exports=Jt}(ft);var Ht=lt(ft.exports);const Tt=[0,0];function Bt(t,e,r){let{x1:n,x2:s,y1:i,y2:o}=t;if(void 0===n&&(n=0),void 0===s&&(s=0),void 0===i&&(i=0),void 0===o&&(o=0),a(n)&&a(s)&&a(i)&&a(o))return r&&(Tt[0]=n,Tt[1]=i,[n,i]=g(Tt,r),Tt[0]=s,Tt[1]=o,[s,o]=g(Tt,r)),`M${n},${i} L${s},${o}`;e.push(`Invalid <line> properties: ${JSON.stringify({x1:n,y1:i,x2:s,y2:o})}.`)}function Rt(t,e,r){let{x:n,y:s}=t;void 0===n&&(n=0),void 0===s&&(s=0);const{width:i,height:c}=t;if(!(a(n)&&a(s)&&o(i)&&o(c)))return void e.push(`Invalid <rect> properties: ${JSON.stringify({x:n,y:s,width:i,height:c})}.`);let u=n,h=s,l=n+i,f=s,p=n+i,d=s+c,m=n,b=s+c;return r&&(Tt[0]=u,Tt[1]=h,[u,h]=g(Tt,r),Tt[0]=l,Tt[1]=f,[l,f]=g(Tt,r),Tt[0]=p,Tt[1]=d,[p,d]=g(Tt,r),Tt[0]=m,Tt[1]=b,[m,b]=g(Tt,r)),`M${u},${h} L${l},${f} L${p},${d} L${m},${b} z`}function Ut(t,e,r,n){let{cx:s,cy:i,r:c}=t;if(void 0===s&&(s=0),void 0===i&&(i=0),void 0===c&&(c=0),!a(s)||!a(i)||!o(c))return void e.push(`Invalid <circle> properties: ${JSON.stringify({cx:s,cy:i,r:c})}.`);const u=Yt(s,i,c,c,r,n);if(!u.err)return u;e.push(`Problem parsing <circle> ${JSON.stringify({cx:s,cy:i,r:c})} with ${u.err}.`)}function Xt(t,e,r,n){let{cx:s,cy:i,rx:c,ry:u}=t;if(void 0===s&&(s=0),void 0===i&&(i=0),void 0===c&&(c=0),void 0===u&&(u=0),!(a(s)&&a(i)&&o(c)&&o(u)))return void e.push(`Invalid <ellipse> properties: ${JSON.stringify({cx:s,cy:i,rx:c,ry:u})}.`);const h=Yt(s,i,c,u,r,n);if(!h.err)return h;e.push(`Problem parsing <ellipse> ${JSON.stringify({cx:s,cy:i,rx:c,ry:u})} with ${h.err}.`)}function Yt(t,e,r,n,s,a){let i=Ht(`M${t-r},${e} a${r},${n} 0 1,0 ${2*r},0 a ${r},${n} 0 1,0 -${2*r},0`).abs();return s||(i=i.unarc()),a&&(i=i.matrix([a.a,a.b,a.c,a.d,a.e,a.f])),i}function Dt(t,e,r){const{points:n}=t;if(!c(n))return void e.push(`Invalid <polygon> properties: ${JSON.stringify({points:n})}.`);const s=Wt(n,e,st,r);return s?s+" z":s}function Qt(t,e,r){const{points:n}=t;if(c(n))return Wt(n,e,at,r);e.push(`Invalid <polyline> properties: ${JSON.stringify({points:n})}.`)}function Wt(t,e,r,n){const s=h(t).split(" ");let a="";for(;s.length;){const i=s.shift().split(",");if(1===i.length&&s.length&&s.length%2==1&&i.push(s.shift()),2!==i.length)return void e.push(`Unable to parse points string: "${t}" in <${r}>.`);let o=parseFloat(i[0]),c=parseFloat(i[1]);if(isNaN(o)||isNaN(c))return void e.push(`Unable to parse points string: "${t}" in <${r}>.`);n&&(Tt[0]=o,Tt[1]=c,[o,c]=g(Tt,n)),a+=""===a?`M${o},${c}`:` L${o},${c}`}return a}function Zt(t,e,r,n){const{d:s}=t;if(!c(s))return void e.push(`Invalid <path> properties: ${JSON.stringify({d:s})}.`);let a=Ht(s).abs().unshort();if(r&&(a=a.unarc()),n&&(a=a.matrix([n.a,n.b,n.c,n.d,n.e,n.f])),!a.err)return a;e.push(`Problem parsing <path> ${JSON.stringify({d:s})} with ${a.err}.`)}function Kt(t){Object.defineProperty(t,"__esModule",{value:!0,configurable:!0})}function te(t,e,r,n){Object.defineProperty(t,e,{get:r,set:n,enumerable:!0,configurable:!0})}var ee={};Kt(ee),te(ee,"default",(()=>re));class re extends Error{constructor(t,e,r,n,s){super(t+":"+r+":"+n+": "+e),this.reason=e,this.filename=t,this.line=r,this.column=n,this.source=s}}var ne={};Kt(ne),te(ne,"default",(()=>se));class se{constructor(t,e,r){this.start=t,this.end=e,this.source=r}}var ae,ie;te({},"CssTypes",(()=>ae)),(ie=ae||(ae={})).stylesheet="stylesheet",ie.rule="rule",ie.declaration="declaration",ie.comment="comment",ie.container="container",ie.charset="charset",ie.document="document",ie.customMedia="custom-media",ie.fontFace="font-face",ie.host="host",ie.import="import",ie.keyframes="keyframes",ie.keyframe="keyframe",ie.layer="layer",ie.media="media",ie.namespace="namespace",ie.page="page",ie.supports="supports";const oe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function ce(t){return t?t.trim():""}function ue(t,e){const r=t&&"string"==typeof t.type,n=r?t:e;for(const e in t){const r=t[e];Array.isArray(r)?r.forEach((t=>{ue(t,n)})):r&&"object"==typeof r&&ue(r,n)}return r&&Object.defineProperty(t,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null}),t}var he=(t,e)=>{e=e||{};let r=1,n=1;function s(){const t={line:r,column:n};return function(s){return s.position=new se(t,{line:r,column:n},e?.source||""),l(),s}}const a=[];function i(s){const i=new re(e?.source||"",s,r,n,t);if(!e?.silent)throw i;a.push(i)}function o(){return h(/^{\s*/)}function c(){return h(/^}/)}function u(){let e;const r=[];for(l(),f(r);t.length&&"}"!==t.charAt(0)&&(e=k()||$());)e&&(r.push(e),f(r));return r}function h(e){const s=e.exec(t);if(!s)return;const a=s[0];return function(t){const e=t.match(/\n/g);e&&(r+=e.length);const s=t.lastIndexOf("\n");n=~s?t.length-s:n+t.length}(a),t=t.slice(a.length),s}function l(){h(/^\s*/)}function f(t){let e;for(t=t||[];e=p();)e&&t.push(e);return t}function p(){const e=s();if("/"!==t.charAt(0)||"*"!==t.charAt(1))return;const r=h(/^\/\*[^]*?\*\//);return r?e({type:ae.comment,comment:r[0].slice(2,-2)}):i("End of comment missing")}function d(){const t=h(/^([^{]+)/);if(!t)return;const e=ce(t[0]).replace(/\/\*[^]*?\*\//gm,"");return-1===e.indexOf(",")?[e]:e.replace(/("|')(?:\\\1|.)*?\1|\(.*?\)/g,(t=>t.replace(/,/g,"‌"))).split(",").map((t=>ce(t.replace(/\u200C/g,","))))}function g(){const t=s(),e=h(/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(!e)return;const r=ce(e[0]);if(!h(/^:\s*/))return i("property missing ':'");const n=h(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/),a=t({type:ae.declaration,property:r.replace(oe,""),value:n?ce(n[0]).replace(oe,""):""});return h(/^[;\s]*/),a}function m(){const t=[];if(!o())return i("missing '{'");let e;for(f(t);e=g();)e&&(t.push(e),f(t));return c()?t:i("missing '}'")}function b(){let t;const e=[],r=s();for(;t=h(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)e.push(t[1]),h(/^,\s*/);if(e.length)return r({type:ae.keyframe,values:e,declarations:m()||[]})}const v=x("import"),y=x("charset"),w=x("namespace");function x(t){const e=new RegExp("^@"+t+"\\s*((:?[^;'\"]|\"(?:\\\\\"|[^\"])*?\"|'(?:\\\\'|[^'])*?')+);");return function(){const r=s(),n=h(e);if(!n)return;const a={type:t};return a[t]=n[1].trim(),r(a)}}function k(){if("@"===t[0])return function(){const t=s(),e=h(/^@([-\w]+)?keyframes\s*/);if(!e)return;const r=e[1],n=h(/^([-\w]+)\s*/);if(!n)return i("@keyframes missing name");const a=n[1];if(!o())return i("@keyframes missing '{'");let u,l=f();for(;u=b();)l.push(u),l=l.concat(f());return c()?t({type:ae.keyframes,name:a,vendor:r,keyframes:l}):i("@keyframes missing '}'")}()||function(){const t=s(),e=h(/^@media *([^{]+)/);if(!e)return;const r=ce(e[1]);if(!o())return i("@media missing '{'");const n=f().concat(u());return c()?t({type:ae.media,media:r,rules:n}):i("@media missing '}'")}()||function(){const t=s(),e=h(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(e)return t({type:ae.customMedia,name:ce(e[1]),media:ce(e[2])})}()||function(){const t=s(),e=h(/^@supports *([^{]+)/);if(!e)return;const r=ce(e[1]);if(!o())return i("@supports missing '{'");const n=f().concat(u());return c()?t({type:ae.supports,supports:r,rules:n}):i("@supports missing '}'")}()||v()||y()||w()||function(){const t=s(),e=h(/^@([-\w]+)?document *([^{]+)/);if(!e)return;const r=ce(e[1]),n=ce(e[2]);if(!o())return i("@document missing '{'");const a=f().concat(u());return c()?t({type:ae.document,document:n,vendor:r,rules:a}):i("@document missing '}'")}()||function(){const t=s();if(!h(/^@page */))return;const e=d()||[];if(!o())return i("@page missing '{'");let r,n=f();for(;r=g();)n.push(r),n=n.concat(f());return c()?t({type:ae.page,selectors:e,declarations:n}):i("@page missing '}'")}()||function(){const t=s();if(!h(/^@host\s*/))return;if(!o())return i("@host missing '{'");const e=f().concat(u());return c()?t({type:ae.host,rules:e}):i("@host missing '}'")}()||function(){const t=s();if(!h(/^@font-face\s*/))return;if(!o())return i("@font-face missing '{'");let e,r=f();for(;e=g();)r.push(e),r=r.concat(f());return c()?t({type:ae.fontFace,declarations:r}):i("@font-face missing '}'")}()||function(){const t=s(),e=h(/^@container *([^{]+)/);if(!e)return;const r=ce(e[1]);if(!o())return i("@container missing '{'");const n=f().concat(u());return c()?t({type:ae.container,container:r,rules:n}):i("@container missing '}'")}()||function(){const t=s(),e=h(/^@layer *([^{;@]+)/);if(!e)return;const r=ce(e[1]);if(!o())return h(/^[;\s]*/),t({type:ae.layer,layer:r});const n=f().concat(u());return c()?t({type:ae.layer,layer:r,rules:n}):i("@layer missing '}'")}()}function $(){const t=s(),e=d();return e?(f(),t({type:ae.rule,selectors:e,declarations:m()||[]})):i("selector missing")}return ue(function(){const t=u();return{type:ae.stylesheet,stylesheet:{source:e?.source,rules:t,parsingErrors:a}}}())};const le=he;B([function(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var s in r)n[r[s]]=s;var a={};t.prototype.toName=function(e){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var s,i,o=n[this.toHex()];if(o)return o;if(null==e?void 0:e.closest){var c=this.toRgb(),u=1/0,h="black";if(!a.length)for(var l in r)a[l]=new t(r[l]).toRgb();for(var f in r){var p=(s=c,i=a[f],Math.pow(s.r-i.r,2)+Math.pow(s.g-i.g,2)+Math.pow(s.b-i.b,2));p<u&&(u=p,h=f)}return h}},e.string.push([function(e){var n=e.toLowerCase(),s="transparent"===n?"#0000":r[n];return s?new t(s).toRgb():null},"name"])}]),B([function(t,e){t.prototype.toLab=function(){return n=(e=K(this.rgba)).y/100,s=e.z/W,r=(r=e.x/Q)>tt?Math.cbrt(r):(et*r+16)/116,t={l:116*(n=n>tt?Math.cbrt(n):(et*n+16)/116)-16,a:500*(r-n),b:200*(n-(s=s>tt?Math.cbrt(s):(et*s+16)/116)),alpha:e.a},{l:U(t.l,2),a:U(t.a,2),b:U(t.b,2),alpha:U(t.alpha,3)};var t,e,r,n,s},t.prototype.delta=function(e){void 0===e&&(e="#FFF");var r=e instanceof t?e:new t(e),n=function(t,e){var r=t.l,n=t.a,s=t.b,a=e.l,i=e.a,o=e.b,c=180/Math.PI,u=Math.PI/180,h=Math.pow(Math.pow(n,2)+Math.pow(s,2),.5),l=Math.pow(Math.pow(i,2)+Math.pow(o,2),.5),f=(r+a)/2,p=Math.pow((h+l)/2,7),d=.5*(1-Math.pow(p/(p+Math.pow(25,7)),.5)),g=n*(1+d),m=i*(1+d),b=Math.pow(Math.pow(g,2)+Math.pow(s,2),.5),v=Math.pow(Math.pow(m,2)+Math.pow(o,2),.5),y=(b+v)/2,w=0===g&&0===s?0:Math.atan2(s,g)*c,x=0===m&&0===o?0:Math.atan2(o,m)*c;w<0&&(w+=360),x<0&&(x+=360);var k=x-w,$=Math.abs(x-w);$>180&&x<=w?k+=360:$>180&&x>w&&(k-=360);var M=w+x;$<=180?M/=2:M=(w+x<360?M+360:M-360)/2;var _=1-.17*Math.cos(u*(M-30))+.24*Math.cos(2*u*M)+.32*Math.cos(u*(3*M+6))-.2*Math.cos(u*(4*M-63)),S=a-r,N=v-b,A=2*Math.sin(u*k/2)*Math.pow(b*v,.5),O=1+.015*Math.pow(f-50,2)/Math.pow(20+Math.pow(f-50,2),.5),P=1+.045*y,j=1+.015*y*_,F=30*Math.exp(-1*Math.pow((M-275)/25,2)),C=-2*Math.pow(p/(p+Math.pow(25,7)),.5)*Math.sin(2*u*F);return Math.pow(Math.pow(S/1/O,2)+Math.pow(N/1/P,2)+Math.pow(A/1/j,2)+C*N*A/(1*P*1*j),.5)}(this.toLab(),r.toLab())/100;return X(U(n,3))},e.object.push([rt,"lab"])}]);class fe{constructor(t,e){if(this.defs=[],this.errors=[],this.warnings=[],void 0===t)throw new Error("Must pass in an SVG string to FlatSVG().");if(""===t)throw new Error("SVG string is empty.");if(this._rootNode=s(t),this._preserveArcs=!!(null==e?void 0:e.preserveArcs),1!==this._rootNode.children.length||"element"!==this._rootNode.children[0].type||"svg"!==this._rootNode.children[0].tagName)throw this.errors.push("Malformed SVG: expected only 1 child <svg> element on root node."),new Error("Malformed SVG: expected only 1 child <svg> element on root node.");const r=this._rootNode.children[0].children;for(let t=r.length-1;t>=0;t--){const e=r[t];if("defs"===e.tagName&&(this.defs.push(e),r.splice(t,1),e.children))for(let t=e.children.length-1;t>=0;t--){const r=e.children[t];"style"===r.tagName&&(e.children.splice(t,1),r.children&&r.children[0]&&"text"===r.children[0].type&&(this._globalStyles=Object.assign(Object.assign({},this._globalStyles),this.parseStyleToObject(r.children[0].value))))}"style"===e.tagName&&(r.splice(t,1),e.children&&e.children[0]&&"text"===e.children[0].type&&(this._globalStyles=Object.assign(Object.assign({},this._globalStyles),this.parseStyleToObject(e.children[0].value))))}this.deepIterChildren=this.deepIterChildren.bind(this)}parseStyleToObject(t){const{errors:e}=this,r={},n=le(t,{silent:!0}),{stylesheet:s}=n;if(!s)return r;if(s.parsingErrors){const t=s.parsingErrors.map((t=>t.message)).filter((t=>void 0!==t));e.push(...t)}if(!s.rules)return r;const a=s.rules;for(let t=0,e=a.length;t<e;t++){const e=a[t],n={},{declarations:s,selectors:i}=e;if(s)for(let t=0,e=s.length;t<e;t++){const e=s[t],{property:r}=e;let{value:a}=e;r&&void 0!==a&&(a=a.replace(/px\b/g,""),/^\-?[0-9]?([0-9]+e-?[0-9]+)?(\.[0-9]+)?$/.test(a)?n[r]=parseFloat(a):n[r]=a)}if(i)for(let t=0,e=i.length;t<e;t++){const e=i[t];r[e]=Object.assign(Object.assign({},r[e]),n)}}return r}get root(){return this._rootNode.children[0]}get viewBox(){const t=this.root.properties.viewBox;return t?t.split(" ").map((t=>parseFloat(t))):[Number.parseFloat(this.root.properties.x||"0"),Number.parseFloat(this.root.properties.y||"0"),Number.parseFloat(this.root.properties.width||"0"),Number.parseFloat(this.root.properties.height||"0")]}get units(){const t=new RegExp(/(em|ex|px|pt|pc|cm|mm|in)$/),{x:e,y:r,width:n,height:s}=this.root.properties||{},a=(null==e?void 0:e.match(t))||(null==r?void 0:r.match(t))||(null==n?void 0:n.match(t))||(null==s?void 0:s.match(t));return a?a[0]:"px"}deepIterChildren(t,e=this.root,r,n,s,i){const{_globalStyles:o}=this;for(let c=0,u=e.children.length;c<u;c++){const u=e.children[c];let h,l,d,g=r;if(u.properties){if(u.properties.transform){const t=f(u.properties.transform,u.tagName);for(let e=0,r=t.length;e<r;e++){const{errors:r,warnings:n}=t[e];r&&this.errors.push(...r),n&&this.warnings.push(...n)}t.length&&(g&&t.unshift(g),g=p(t)),delete u.properties.transform}let t=u.properties||{};if(l=n,u.properties.id){if(o){const e=u.properties.id.split(" ");for(let r=0,n=e.length;r<n;r++){const n=o[`#${e[r]}`];n&&(t=Object.assign(Object.assign({},t),n))}}l=`${l?`${l} `:""}${u.properties.id}`,delete u.properties.id,delete t.id}if(h=s,u.properties.class){if(o){const e=u.properties.class.split(" ");for(let r=0,n=e.length;r<n;r++){const n=o[`.${e[r]}`];n&&(t=Object.assign(Object.assign({},t),n))}}h=`${h?`${h} `:""}${u.properties.class}`,delete u.properties.class,delete t.class}if(d=i,t.style){const e=this.parseStyleToObject(`#this { ${t.style} }`)["#this"];t=Object.assign(Object.assign({},e),t),delete t.style}const e=Object.keys(t);for(let r=0,n=e.length;r<n;r++){const n=e[r];if(void 0!==t[n]){if(d&&d!==i||(d=Object.assign({},i)),n===ut){if(!a(t[n]))throw new Error(`Opacity is not number: "${JSON.stringify(t[n])}".`);d[n]=t[n]*(void 0!==d[n]?d[n]:1)}void 0===d[n]&&(d[n]=t[n])}}}"g"!==u.tagName&&t(u,g?m(g):void 0,null==l?void 0:l.slice(),null==h?void 0:h.slice(),d?Object.assign({},d):void 0),u.children&&this.deepIterChildren(t,u,g,l,h,d)}}get elements(){if(this._elements)return this._elements;const t=[],e=[];return this.deepIterChildren(((r,n,s,a,i)=>{if(r.value)return void e.push(`Skipping child ${r.tagName} with value: ${r.value}`);if(r.metadata)return void e.push(`Skipping child ${r.tagName} with metadata: ${r.metadata}`);if(!r.tagName)return void e.push(`Skipping child with no tagName: ${JSON.stringify(r)}.`);if(!i)return void e.push(`Skipping child with no properties: ${JSON.stringify(r)}.`);s&&(i.ids=s),a&&(i.class=a);const o={tagName:r.tagName,properties:i};n&&(o.transform=n),t.push(o)})),this._elements=t,this.errors.push(...e),this.warnings.push(),t}static wrapWithSVGTag(t,e){const r=t.properties||{};return`<svg ${Object.keys(r).map((t=>`${t}="${r[t]}"`)).join(" ")}>\n${e}\n</svg>`}static elementsAsSVG(t,e){return fe.wrapWithSVGTag(t,e.map((t=>{const{tagName:e,properties:r,transform:n}=t,s=Object.keys(r);let a="";for(let t=0,e=s.length;t<e;t++){const e=s[t];a+=`${e}="${r[e]}" `}return n&&(a+=`transform="${function(t){return`matrix(${t.a} ${t.b} ${t.c} ${t.d} ${t.e} ${t.f})`}(n)}" `),`<${e} ${a}/>`})).join("\n"))}get elementsAsSVG(){const{elements:t,root:e}=this;return fe.elementsAsSVG(e,t)}get paths(){if(this._paths)return this._paths;const{elements:t,_preserveArcs:e}=this,r=[],n=[],s=[],a=[];for(let i=0;i<t.length;i++){const o=t[i],{transform:c,tagName:u,properties:h}=o,l=Object.assign({},h);let f,p;switch(u){case"line":f=Bt(h,s,c),delete l.x1,delete l.y1,delete l.x2,delete l.y2;break;case"rect":f=Rt(h,s,c),delete l.x,delete l.y,delete l.width,delete l.height;break;case st:f=Dt(h,s,c),delete l.points;break;case at:f=Qt(h,s,c),delete l.points;break;case"circle":p=Ut(h,s,e,c),p&&(f=p.toString()),delete l.cx,delete l.cy,delete l.r;break;case"ellipse":p=Xt(h,s,e,c),p&&(f=p.toString()),delete l.cx,delete l.cy,delete l.rx,delete l.ry;break;case"path":p=Zt(h,s,e,c),p&&(f=p.toString()),delete l.d;break;default:a.push(`Unsupported tagname: "${u}".`)}if(void 0===f||""===f)continue;const d={properties:Object.assign(Object.assign({},l),{d:f})};r.push(d),n.push(p)}return this._paths=r,this._pathParsers=n,this.errors.push(...s),this.warnings.push(...a),r}static pathsAsSVG(t,e){return fe.wrapWithSVGTag(t,e.map((t=>{const{properties:e}=t,r=Object.keys(e);let n="";for(let t=0,s=r.length;t<s;t++){const s=r[t];n+=`${s}="${e[s]}" `}return`<path ${n}/>`})).join("\n"))}get pathsAsSVG(){const{paths:t,root:e}=this;return fe.pathsAsSVG(e,t)}get segments(){if(this._segments)return this._segments;const{paths:t}=this,{_pathParsers:e}=this;e||console.warn("Initing new _pathParsers array, we should never hit this.");const r=e||new Array(t.length).fill(void 0),n=[],s=[];for(let e=0,a=t.length;e<a;e++){const a=t[e],{properties:i}=a;let o=r[e];void 0===o&&(o=Ht(i.d),r[e]=o),o.err&&s.push(`Problem parsing path to segments with ${o.err}.`);const c=[0,0];o.iterate(((t,e,r,a)=>{const u=[r,a],h=Object.assign({},i);delete h.d;const l={p1:u,properties:h},f=t[0];switch(0===e&&"M"!==f&&s.push(`Malformed svg path: "${o.toString()}", should start with M command.`),f){case"M":return c[0]=t[1],void(c[1]=t[2]);case"L":l.p2=[t[1],t[2]];break;case"H":l.p2=[t[1],a];break;case"V":l.p2=[r,t[1]];break;case"Q":l.controlPoints=[[t[1],t[2]]],l.p2=[t[3],t[4]];break;case"C":l.controlPoints=[[t[1],t[2]],[t[3],t[4]]],l.p2=[t[5],t[6]];break;case"A":l.rx=t[1],l.ry=t[2],l.xAxisRotation=t[3],l.largeArcFlag=!!t[4],l.sweepFlag=!!t[5],l.p2=[t[6],t[7]];break;case"z":case"Z":if(c[0]===r&&c[1]===a)return;l.p2=[c[0],c[1]];break;default:return void s.push(`Unknown <path> command: ${f}.`)}n.push(l)}))}return this._segments=n,delete this._pathParsers,this.errors.push(...s),this.warnings.push(),n}static segmentsAsSVG(t,e){return fe.wrapWithSVGTag(t,e.map((t=>{const{p1:e,p2:r,properties:n}=t,s=Object.keys(n);let a="";for(let t=0,e=s.length;t<e;t++){const e=s[t];a+=`${e}="${n[e]}" `}if(t.controlPoints){const{controlPoints:n}=t,s=1===n.length?"Q":"C";let i=`M ${e[0]} ${e[1]} ${s} ${n[0][0]} ${n[0][1]} `;return"C"===s&&(i+=`${n[1][0]} ${n[1][1]} `),i+=`${r[0]} ${r[1]} `,`<path d="${i}" ${a}/>`}if(void 0!==t.rx){const{rx:n,ry:s,xAxisRotation:i,largeArcFlag:o,sweepFlag:c}=t;return`<path d="M ${e[0]} ${e[1]} A ${n} ${s} ${i} ${o?1:0} ${c?1:0} ${r[0]} ${r[1]}" ${a}/>`}return`<line x1="${e[0]}" y1="${e[1]}" x2="${r[0]}" y2="${r[1]}" ${a}/>`})).join("\n"))}get segmentsAsSVG(){const{segments:t,root:e}=this;return fe.segmentsAsSVG(e,t)}static filter(t,e){const r=[];for(let n=0;n<t.length;n++){const s=t[n];e(s,n)&&r.push(s)}return r}static filterByStyle(t,e,r,n){const s=Array.isArray(e)?e:[e],i=[];for(let t=0;t<s.length;t++){const{key:e,value:r}=s[t];switch(i.push(r),e){case ot:case it:case ct:i[t]=H(r);break;case ht:i[t]=l(r)}}const o=fe.filter(t,((e,o)=>{if(n&&n[o])return!1;const{properties:c}=e;for(let e=0;e<s.length;e++){const{key:n,tolerance:u}=s[e];let h=i[e],f=!0;switch(n){case ot:case it:case ct:case ut:let e;const s=n===ut?ot:n;if(r&&(e=r[o][s]),void 0===e){e=H(c[s]);const n=c.opacity;if(void 0!==n){const t=n*e.rgba.a;e=e.alpha(t)}if(!r){r=new Array(t.length);for(let e=0;e<t.length;e++)r[e]={}}r[o][s]=e}if(n===ot||n===it||n===ct){f=e.delta(h)<=(u||0);break}f=Math.abs(e.rgba.a-h)<=(u||0);break;case ht:let i;if(r&&(i=r[o][n]),!i){if(i=l(c[n]),!r){r=new Array(t.length);for(let e=0;e<t.length;e++)r[e]={}}r[o][n]=i}if(i.length!==h.length&&(i.length===2*h.length?h=[...h,...h]:2*i.length===h.length?i=[...i,...i]:f=!1),f)for(let t=0;t<h.length;t++)Math.abs(h[t]-i[t])>(u||0)&&(f=!1);break;default:if(!a(h))throw f=!1,new Error(`flat-svg cannot handle filters with key "${n}" and value ${JSON.stringify(h)} of type ${typeof h}.  Please submit an issue to https://github.com/amandaghassaei/flat-svg if this feature should be added.`);(void 0===c[n]||Math.abs(c[n]-h)>(u||0))&&(f=!1)}if(!f)return!1}return!0}));return{matches:o,computedProperties:r}}filterElementsByStyle(t,e){const{elements:r}=this,{matches:n,computedProperties:s}=fe.filterByStyle(r,t,this._computedElementProperties,e);return this._computedElementProperties=s,n}filterPathsByStyle(t,e){const{paths:r}=this,{matches:n,computedProperties:s}=fe.filterByStyle(r,t,this._computedPathProperties,e);return this._computedPathProperties=s,n}filterSegmentsByStyle(t,e){const{segments:r}=this,{matches:n,computedProperties:s}=fe.filterByStyle(r,t,this._computedSegmentProperties,e);return this._computedSegmentProperties=s,n}}t.FlatSVG=fe,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=flat-svg.min.js.map
